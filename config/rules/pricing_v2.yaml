# Pricing Category Rules v2.0
# ============================
# 
# Signals are weighted and combined to produce a score.
# If score >= threshold, the "Pricing" category is applied.
#
# Pattern types:
#   substring      - Simple text match (default)
#   regex         - Regular expression pattern
#   word_boundary - Match whole words only
#   dollar_amount - Match dollar amounts ($100, $1,000, etc.)
#
# Signal locations:
#   subject_contains  - Found in email subject (case-insensitive)
#   body_contains     - Found in email body (case-insensitive)
#   anywhere          - Found in subject OR body
#   attachment_name   - Found in attachment filename
#   sender_contains   - Found in sender email address

version: "2.0"

category:
  name: "Pricing"
  outlook_category: "Pricing"  # Must match exact Outlook category name
  threshold: 40
  enabled: true

scoring:
  method: "tiered"  # tiered, additive, or hybrid
  weak_signal_cap: 15  # Maximum contribution from weak signals
  medium_signal_multiplier: 0.9  # Weight reduction for medium signals

signals:
  strong:
    - pattern: "PCO"
      pattern_type: "word_boundary"
      location: "subject_contains"
      weight: 50
      description: "Potential Change Order in subject"
      enabled: true
      
    - pattern: "PCO-"
      pattern_type: "substring"
      location: "anywhere"
      weight: 50
      enabled: true
      
    - pattern: "PCO #"
      pattern_type: "substring"
      location: "anywhere"
      weight: 50
      enabled: true
      
    - pattern: "PCO#"
      pattern_type: "substring"
      location: "anywhere"
      weight: 50
      enabled: true
      
    - pattern: "COR"
      pattern_type: "word_boundary"
      location: "subject_contains"
      weight: 45
      description: "Change Order Request"
      enabled: true
      
    - pattern: "change order"
      pattern_type: "substring"
      location: "anywhere"
      weight: 45
      enabled: true
      
    - pattern: "cost proposal"
      pattern_type: "substring"
      location: "anywhere"
      weight: 45
      enabled: true
      
    - pattern: "pricing request"
      pattern_type: "substring"
      location: "anywhere"
      weight: 45
      enabled: true

  medium:
    - pattern: "pricing"
      pattern_type: "substring"
      location: "body_contains"
      weight: 40
      enabled: true
      
    - pattern: "your pricing"
      pattern_type: "substring"
      location: "anywhere"
      weight: 40
      description: "Common phrase when providing pricing information"
      enabled: true
      
    - pattern: "quote"
      pattern_type: "substring"
      location: "body_contains"
      weight: 20
      enabled: true
      
    - pattern: "quotation"
      pattern_type: "substring"
      location: "body_contains"
      weight: 20
      enabled: true
      
    - pattern: "cost impact"
      pattern_type: "substring"
      location: "anywhere"
      weight: 30
      enabled: true
      
    - pattern: "budget impact"
      pattern_type: "substring"
      location: "anywhere"
      weight: 25
      enabled: true
      
    - pattern: "additional cost"
      pattern_type: "substring"
      location: "anywhere"
      weight: 25
      enabled: true
      
    - pattern: "T&M"
      pattern_type: "substring"
      location: "anywhere"
      weight: 30
      description: "Time and Materials"
      enabled: true
      
    - pattern: "time and material"
      pattern_type: "substring"
      location: "anywhere"
      weight: 30
      enabled: true
      
    - pattern: "provide pricing"
      pattern_type: "substring"
      location: "anywhere"
      weight: 35
      enabled: true
      
    - pattern: "send pricing"
      pattern_type: "substring"
      location: "anywhere"
      weight: 35
      enabled: true
      
    - pattern: "submit pricing"
      pattern_type: "substring"
      location: "anywhere"
      weight: 35
      enabled: true
      
    - pattern: "need pricing"
      pattern_type: "substring"
      location: "anywhere"
      weight: 35
      enabled: true
      
    - pattern: "request for pricing"
      pattern_type: "substring"
      location: "anywhere"
      weight: 40
      enabled: true
      
    - pattern: "price increase"
      pattern_type: "substring"
      location: "anywhere"
      weight: 35
      enabled: true
      
    - pattern: "cost increase"
      pattern_type: "substring"
      location: "anywhere"
      weight: 35
      enabled: true
      
    - pattern: "ADD $"
      pattern_type: "substring"
      location: "anywhere"
      weight: 40
      description: "Explicit cost addition statement"
      enabled: true
      
    - pattern: "add $"
      pattern_type: "substring"
      location: "anywhere"
      weight: 40
      description: "Explicit cost addition statement"
      enabled: true
      
    - pattern: "$"
      pattern_type: "dollar_amount"
      location: "anywhere"
      weight: 30
      description: "Dollar amount indicator (any format: $100, $1,000, etc.)"
      enabled: true

  weak:
    - pattern: "price"
      pattern_type: "substring"
      location: "body_contains"
      weight: 8
      enabled: true
      
    - pattern: "cost"
      pattern_type: "substring"
      location: "body_contains"
      weight: 5
      enabled: true
      
    - pattern: "budget"
      pattern_type: "substring"
      location: "body_contains"
      weight: 5
      enabled: true

  negative:
    - pattern: "no cost impact"
      pattern_type: "substring"
      location: "anywhere"
      weight: -35
      enabled: true
      
    - pattern: "at no additional cost"
      pattern_type: "substring"
      location: "anywhere"
      weight: -35
      enabled: true
      
    - pattern: "no additional cost"
      pattern_type: "substring"
      location: "anywhere"
      weight: -35
      enabled: true
      
    - pattern: "no change in price"
      pattern_type: "substring"
      location: "anywhere"
      weight: -30
      enabled: true
      
    - pattern: "no change to price"
      pattern_type: "substring"
      location: "anywhere"
      weight: -30
      enabled: true
      
    - pattern: "no charge"
      pattern_type: "substring"
      location: "anywhere"
      weight: -25
      enabled: true
      
    - pattern: "cost of living"
      pattern_type: "substring"
      location: "anywhere"
      weight: -20
      description: "Common in unrelated contexts"
      enabled: true
      
    - pattern: "price is right"
      pattern_type: "substring"
      location: "anywhere"
      weight: -20
      description: "Colloquial usage"
      enabled: true

  attachment:
    - pattern: "PCO"
      pattern_type: "word_boundary"
      weight: 45
      enabled: true
      
    - pattern: "quote"
      pattern_type: "substring"
      weight: 30
      enabled: true
      
    - pattern: "pricing"
      pattern_type: "substring"
      weight: 35
      enabled: true
      
    - pattern: "cost proposal"
      pattern_type: "substring"
      weight: 40
      enabled: true
      
    - pattern: "COR"
      pattern_type: "word_boundary"
      weight: 40
      enabled: true

co_occurrence_bonuses:
  - signal_pair: ["PCO", "$"]
    bonus_weight: 10
    proximity_words: 10
    description: "PCO with dollar amount"

